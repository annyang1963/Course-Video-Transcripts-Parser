1
00:00:00,140 --> 00:00:03,600
Let's talk about relationships.

2
00:00:03,600 --> 00:00:05,385
What are they anyway?

3
00:00:05,385 --> 00:00:12,570
Well, a good way to think about them is that they carry relationship groups and filters.

4
00:00:12,570 --> 00:00:15,000
Let's start by saying we want to select

5
00:00:15,000 --> 00:00:19,095
all transactions where the PLU is tied to the category fruit.

6
00:00:19,095 --> 00:00:23,054
When you select a category to be filtered on a report,

7
00:00:23,054 --> 00:00:25,260
this is the same as telling your data model to

8
00:00:25,260 --> 00:00:28,425
retrieve the values related to those categories.

9
00:00:28,425 --> 00:00:30,990
The request is carried from the dimension where

10
00:00:30,990 --> 00:00:33,915
the category lives to the fact table it's tied to.

11
00:00:33,915 --> 00:00:36,360
We can see that the step we just took in

12
00:00:36,360 --> 00:00:42,065
the grocery store report is the same as filtering for just fruit on the dimension table,

13
00:00:42,065 --> 00:00:45,545
identifying the rows that are part of the fruit category.

14
00:00:45,545 --> 00:00:50,330
Then using the PLU key to carry this request from the dimension table to

15
00:00:50,330 --> 00:00:53,390
the fact table where the data model chooses just

16
00:00:53,390 --> 00:00:57,630
those transaction rows with those PLU keys.

17
00:00:57,800 --> 00:01:01,025
Relationships work pretty well,

18
00:01:01,025 --> 00:01:04,405
but they have to be pointed in the right direction.

19
00:01:04,405 --> 00:01:10,205
Sometimes Power BI will really try to help you by creating a relationship on your behalf.

20
00:01:10,205 --> 00:01:15,410
Because you only have a small amount of information in your transaction table,

21
00:01:15,410 --> 00:01:16,850
it might guess wrong.

22
00:01:16,850 --> 00:01:19,445
It might assume that the relationship should be

23
00:01:19,445 --> 00:01:23,380
filtering in the opposite direction of what you intended.

24
00:01:23,380 --> 00:01:28,310
If in the same example we had created a relationship that pointed from

25
00:01:28,310 --> 00:01:30,995
the transaction table to the dimension table

26
00:01:30,995 --> 00:01:34,205
Power BI might still accept this as a relationship,

27
00:01:34,205 --> 00:01:37,000
but you'd see the side effects in the report.

28
00:01:37,000 --> 00:01:39,995
With the arrow pointing towards the dimension table,

29
00:01:39,995 --> 00:01:45,725
any filter you apply to the field on that dimension table has no path to another table.

30
00:01:45,725 --> 00:01:49,354
When you try to create a filter based on the fruit category,

31
00:01:49,354 --> 00:01:51,805
there's nowhere really for that filter to go.

32
00:01:51,805 --> 00:01:56,405
Instead, Power BI is expecting that based on the relationship,

33
00:01:56,405 --> 00:01:59,075
you're going to apply filters using the fields

34
00:01:59,075 --> 00:02:02,100
on the transaction onto the dimension table.

35
00:02:02,100 --> 00:02:10,894
Something like "Select all dimension rows where the PLU is tied to the subtotal $2.97."

36
00:02:10,894 --> 00:02:13,760
It just doesn't make sense.

37
00:02:13,760 --> 00:02:19,310
Relationships also only work if they're connected by the intended keys.

38
00:02:19,310 --> 00:02:22,250
This is an unlikely but possible scenario where

39
00:02:22,250 --> 00:02:25,735
someone linked up the variety column with the PLU.

40
00:02:25,735 --> 00:02:30,125
This is likely to trigger something like a many-to-many relationship,

41
00:02:30,125 --> 00:02:32,750
which if you've been building your dimension tables

42
00:02:32,750 --> 00:02:35,195
to ensure each row should have a unique key,

43
00:02:35,195 --> 00:02:38,640
should tell you right away that you goofed.

